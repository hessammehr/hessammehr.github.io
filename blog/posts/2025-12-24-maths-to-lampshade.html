<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Hessam's blog RSS Feed"
      href="/feed.xml"
    />
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="/primer.css" />
    <link
      rel="stylesheet"
      href="/light.css"
      media="(prefers-color-scheme: light)"
    />
    <link
      rel="stylesheet"
      href="/dark.css"
      media="(prefers-color-scheme: dark)"
    />
    <script defer=""
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
    type="text/javascript"></script>
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body"><h1
id="d-printed-lampshade-from-a-formula">3D printed lampshade from a
formula</h1>
<p>I’ve been playing with translucent PLA for lighting projects at home.
Earlier this year, I built a diffuser/housing for our Lidl LED strip,
since the light from the exposed LEDs was too cool and jarring. The
design files are on OnShape, although they might need tweaking for the
exact strip and required installation area.</p>
<div class="gallery">
<p><img src="../images/livarno-led.png" alt="alt text" /> <img
src="../images/rail-design.png" alt="alt text" /> <img
src="../images/kitchen-lights.jpeg" alt="alt text" /></p>
</div>
<p>A few viral videos have recently popped up in my YouTube feed showing
bespoke 3D-printed lampshades. These ondulating membranes struck me as a
surface that would arise from sweeping 2D profile as it’s raised and
rotated through space. Making one from scratch seemed like a fun
challenge (not to mention a nice Christmas present!).</p>
<h2 id="d-profile">2D profile</h2>
<p>I started by graphing the following equation in <a
href="https://www.desmos.com/calculator/ramwof22yn">Desmos</a> (link
will take you to the formula).</p>
<p><span class="math display">\[ r = \cos(5\theta) + 0.2\cos(9\theta) +
0.05\cos(200\theta) + 4\]</span></p>
<p>Something like this with big gentle ondulations on top of which small
jittery ridges are overlapped.</p>
<figure>
<img src="../images/graph.png" alt="alt text" />
<figcaption aria-hidden="true">alt text</figcaption>
</figure>
<h2 id="trying-and-failing-3d-with-onshape">Trying (and failing) 3D with
OnShape</h2>
<p>Desmos helpfully allows export to SVG, which I then converted to DXF
in Inkscape so it can be imported into OnShape. DXF files can be added
to OnShape sketches directly. So far so good. Creating the loft object
in OnShape proved challenging though. A loft is pretty much what I
described earlier, the volume or surface created as one 2D profile is
interpolated to another. In this case, the second profile is just a
point placed above the initial one. Something like this:</p>
<div class="gallery">
<p><img src="../images/profiles.png" alt="alt text" /><img
src="../images/onshape-loft.png" alt="alt text" /></p>
</div>
<p>The loft tool provide a few nice settings, specifically the initial
and final angle of approach to each profile. I want the shape to rise
straight from the 2D contour and form a tangent to the final point. This
way the top will form a nice dome rather than a sharp spike.</p>
<p>This complex organic-looking profile, made up of 1047 points, doesn’t
really seem to fit OnShape’s main usecase. The loft operation kept
failing to process (although it looks nice) and froze a couple of times
too.</p>
<figure>
<img src="../images/onshape-error.png" alt="alt text" />
<figcaption aria-hidden="true">alt text</figcaption>
</figure>
<p>At this point, I had another idea. Since the point coordinates are
known, it shouldn’t be too hard to create the shape in Python. This is
not something I had done before, so I asked ChatGPT for advice. It gave
me a script, which I was able to modify (<a
href="https://github.com/hessammehr/lampshades">repo here</a>) to create
the transition to a single point at the top (essentially scaling the
profile depending on height). The results is a massive 70+MB STL file,
which is currently printing …</p>
<figure>
<img src="../images/lampshade-printing.jpeg" alt="alt text" />
<figcaption aria-hidden="true">alt text</figcaption>
</figure>
<p><strong>Update: </strong> I’ve converted the Jupyter notebook to
marimo so it’s easier to visualise the cross section and profile of the
generated lampshade. You don’t even need to install Python to run this
code, it will run directly in the browser using WebAssembly (<a
href="https://marimo.app/#code/JYWwDg9gTgLgBCAhlUEBQaD6mDmBTAOzykRjwBNMB3YGACzgF44AiABgDoBGADg4BYWaRGDBMEyVBwCCogBQBKDGgACIsBwDGeADY605PADM4mRQC40ca3FCRYcKHis270eAQCu4AJ5xEAM5wBGAu1m4OAB4gOhx4ME54HACiOngghDAAKon+QclZYXBGUBAgcAF0Iro+HPhl8VB+EfAAChA6PjgQBEUtcAmgeJV94O7B8VTQANaRo-bwAZrAYD7z4wF4iABG0AR5FQQBGDbFpeVIMGA6EDA6wNu2Yw6r17cH1zDrDkgoIBAHf4nGwBI4cTYwTD0dJ4OQsGCIHTTFgAGlYMGAmmmAVRxR6MEYLGkKERuKM+MwS0ReEYXA4bDRUE0jAA3iwAgA3HAcckEGAwHxgPAscysAg9YUAXyUpycME8UH2BTR7U63QIaP+aJCaM+jLwaMGGRGGDUoi0un0hhMZi1wTAup0MAUllO1sccmhCJdRVOAGJHIAQAkYgc0EACgDACOQAVkAHcAKQCgBABqBOcABMYcjcgAnPHk6n6dHM1G02w2HmU-xfTY5Qr9iEtOGY3AAFQDOjxRAKOBJuDp1v2xsBHMDr1dnt9wsDhuZuSltijjveif8enKN3GOBgUpGYBpOTkH2nU4sABK8TrQWhFU01OKiE0MGgeKgcB0iB8xDgVA7Tjg5FsIJxSgJB7k2ADyGAAIEQIbQBgBJ8xAgExKmqDghGPGsL0VQcAgAR1gA9uzbOR+17BsdmHMjJ2jacNACYACAPOiODAYAFA49cbDHIJmAokgCHwUi0TTFi2LRTg2C4GUbHIXjB3uI4wAfWEGTgLg0S4MsZOsKB5KgT0l0CHS4EifSgjbGcmx4kyfHMliGKYmyikiOzxAbaCH2mOQAG0zLROyAF00UQSIoMYABaaSiiMNE5EQDT-DTbtmE+cFPG2N4YGHWCOgCRg0zRXccAYgAvGkczRfhONOBLWJuGA5H8uA7JMxA03q24DwCXUdz3WE5Jqmx-g4cBYkYsgSEfYAOVhNKcE0IxFBM2scO3ZD+rRVzjlNdQLT0AxNzMZV7X1I9ZM3G5EEoTkcEwZT6HuiAJuHW77tIOhRWgqBuwigA+QcCHIZASB8V1MNYFgMIh5JIgSB9svbPBimAPSPB6CL0jAAU4AAHgehhyEJDgSZYAHECBxxsKOfx9jkAA5FFkv8KBQeraxkLgAANABNLdnr5IJGLgABlAA1ABxOBPE2V9PAIWgAg4dm4GkAIAm8YYka3D7AP8HQnGuvxIKWOUoIoOA5AaoJOYAGTgMMQCQIGAgUNEf0xBhLk0Dsgh8CAFRRtJlYhyHocw0p3mYApWOQTY5DegmFDqRoIC6pQVYA5h6YlFXyVfXRbH2SOYA4WhiAsFXTmAExdA4BFuQCa5aDhSUWAUHyosCphmBYAmRSriHb0p5g69IQZthTxqWHIXEoZM0Pq5MNImOHw84ABthwcXxes4dinyEHnftkN6YVZr-89Zzoht8XkhzbgMXEU8PBklZ6A4Rz4IMaxnH8d1omAByEmHBAEA3JPLACwtrziwluhDOocAyw3ho+fWOhgjeG2MQAIABubWu40h6xYAAWVMi1OA9tIjkMoeQkBuIAgAi8BkFAmgKgJC2OUKCpkGQ+AZJEDSPgNIgJVkw+SYFGpIDAHIIwV0YD6h5IxYGeg5BQBYJ3JMgUAD8AAdcgLZtEcF0UmAAPuorRRjcSHiGphC+K85CiO7AAUjgKJAAhMwLeR9HCIAfk-HQL836lAMiwAA8uQACTCsGvk5mGaAkECCkC1ngOGU0yAARKGUUWksdb0HgSrbG8l+Kg3sd4Hq-4BRCkYDIiApBk5OFQkKOQUURIIIhgGc8-xZoOx6JsTQngMRdPIJ4Zut4yBBAPlTTpyNkkjNoA7G4jkcD8wmrYEw25hiZEzjXIwhSNCKURNyYCIB7EaEgkYJaBSQphXymwN2-hrm0gXjYaYeA8BiD4hoOgnksS+R8jkF+wV-zbKCADLgeAIrZkCk86wBTxAFJ8i8t5gVz4mAbPsnQhzoDHPhWwbuEUtzZU7lwKFeN1LguzLfUOsLUqEvMF3YEEdqYEuOLKamygzQaG0Add0ZhVRdB6NqB0W4+ppENH8YYdAtqtVvu6SAaoeiYGQFsTA2g+SlGAOQOQBTRQNiBiDD8v0AbymuHgHy1TSCCo4Hq1mH5AqUpsFQmlAQfLmAksi0OfgnUus0u6iG-D3IaFKMoyIaIorQpalwANHAg06DkD4UN0VQ6IHEJwWill6LeCagOQRcB8X+rbD4cNmhHWWzpAuAA9JbAAbPSAcXZiK4UzVm3s-CG1ZoLZGvNkaC3WOPJoT1pba2VrkDWhcbZ60OSbX4Xsgi21UI7bm0y3aWq9tZfKHCiBLX6p8L5YtaJ+2AvIBUmk5rnRcWsO6epiAxp4BVQsigT1OiKTmtlHVGhrWg21KKCahrAbAxtWDFWUNw7HgAKoK3zuUZAmgV44HoFTAI17m6CTgJzZNMHwwWzlT4Z9IcIbastozZmNB6AB3gEMkZiSAKEAApACaeHMLnnXTTexTNk5AahirAMmwcAZD5G+QgcGvkqx41G9FmKQInI4GcpaDYOTfO8j5S5zKfK4qhVc8KtyNP5UTRDXZHAvkIh+T5VT9JAUzlKZmnjCgoUqyfAidBzBnX0tDgiKA+B4AfI4IpJuKlSL0kNLcRE2oJzSRdfSrjRdJpysSfrHoSzrzYefSrMjUbf47tYy4u5R7BQntkeGgAVim-J2U72Yb3nJhTvllM4sCrZ0O+dbCGiLnAQgmsSBkE9MgDz50d4e0IeKeACcfIFe7rjZg8BcYVBG6FqF9qd5FaTMwLgXil5wCK39ZgdjrPzZ3jYIrW3CAJzwDgX66lVsQxPlsM+e3pbiE9Iu51o3uzDqe7Nx7I3u69jBVFaM4bThkZ8sAbuzA5Cdulg2gpZXwKfYnJ4AcUOMMw8W+pX1jLmOof6ee-8m5SgIjIJgVyTUwZ-u3YaIyopT2-t1f+0Gu3NBon07OMcdyPKMUMp2cNp4o3bt+Qz3NARAU+TKZoOraIcuVKpyrVa+xXJwBUHAU8HBCgMpxyYGANBoIPsqJaTAxo6ByBS-04ghOSc07J+fAgRAoCm7fVa2nH44DGLgNfA0KsOzABwHQSETtKeyJRCIzA75Px6W-XyAPrmgs6ChJryEJByB+5qXIoov6jQSuV+Kyou3gMqwloQYgiTxnfkSbAT33uEASt2-isjX4NZQCMCpL6RmXkATx1RxwjESrdKt3gR8Ftth+Dwp4a6QRPQkkEp4d8aTw3V+xsAHoiIi7W4qAqBvcEVF4FmnpZG0BgCZFIPPgg3YJnQVoD7C2fxxnwEQuW3Y-Iyiq4B8bm3cuJmMWt6blmyMGZsZZqDMpdg9wywdwfgSOFA+6mQTgAEOwqWwktyDGx4OemcuOnemAW+GI2gw460BCt6rkduH6BquaAM5uAGu2pw9McKIquBtQDSpquKXipCfEQeH42CXipU+mPmyk2g-makHuXuPuIAaIxC-23ERkHBjEvm3BkkgWDmMeUEce10QhIh1g6B+m6WcgcgpCbYjMcAAAzNlselUvll4o1sAHFKVOTt2MLG1swoknIKVCsPYWUjZL1rdkCp5LBMjKDqQvisAIutJHAMOj4epMoceK5JgHjuIG3gTkTtgf1KbpYRdiocQISn4doXAKKHIH4d9g2joVvGmCDqZD4BEe8G2HEfuCbDBNoKEacKoUDgOBQZkdkSEQ0SJIUaVF4jLnAKoY-hdChBqremvsMAzGHnInAMQqMWiMhDsvEJMcUPcGAKKLsB0L+uIj5GsRNHVmQTYEMfJD5GjovKYS1gJEJMEdJNsZhNsIEHgAuMwNMRCBOGkS7kkXAFcZsJGncecg8b2FkaFrkS8Y1kVsLCcbCPTK4W4ftvsKDijgEc4vTC8bVOIG8TcROAVgiTYI8MwMiQuL2AVr0BCZhKwlidcZGrifiQSW6EiSSaieieEKiu8DIisBcW4bsRwOoDRr5Juq8fuvVhSRDKyeyUDJyfuuLryXya1joJsMybdgGE4FvpsN+Iop3rSceAKaIByT5FyfztsGKeKTsSpErIKZqpqeLjyaEV0bsb0RzM-p-l5oELzjXi-vGuUrlkYUnuGhQXcTaa5OCFUEKKpgcacIwcEMwSHjtKHKoZgI6VEagegZiMMY6abuGrseIAxIYJgLsQzIwDocQowMQlMV8fEIwGpIyWAIwAAGKIibDhqqHiCRmOlWmrJL4m5y5cKDYu4SjMnv4tkDoUSIYAZZE95Oni6GFS63YXzdlOm+nVABlwDuIu7Sk1g+IKl+IBLvzBIACSQ5tMAE0Z5RWsIAMs8AVQXS14iGGQyy-GYY8s8AiARgk0CGSGik3I7cXikZk5MZgkaBKR8Zw4k5SZjZAOhZkIH5h2TEqhoRtZXm8mzevkqhaI75Q5upDWBpPYTmAxGZBpWZOZeZBZMxBI9x8QmAk5RUCxjA-yeArSO83GGIMAPsrxtwT45QfwlspUxZLomOD5KAKGC4T4zZr43FSybAJhz4QJxcFMQkYJi51geJ92MJTizxFJEAtx62LxEAHx625JEJwAKlhFIF25uJLxwAGlelxFBlmlAJBpbJ6pQpPkylaIxlDluKNR+pmB1lQotl9lqGiUxltmXiNFZ+DAiEHe5Q9hjAAAEhxdGYJeMVFPBPxR3ihsQlFF4ohFGc-vdmcf8bdmlaBahsBWZcvj8VlQ0SJa+GJd4oJKCeCXtrJdCX8XAHCWpSpWldGYZUpRpa1RlWSUZS1RAGAIVV+O1QScZeILleZXiZZW5Uab5F5TpQ5cSi5dYGqR5caXNYlOpX5aHPrmNZnnQBnkMJUHIHGZgYwPBfeKdUUh+NIgaSOa6T+r1BAJgflJWZKZRSrPrqNMQPgN+aXpgYoB9enruJEJgEclWQDdtenutM9cdYiBqokuRVAC-OGl0frtju6EgOzjVdYInLrL3IYAEP8AEBFDgCQGAPtbdEIJFhFDTdLLLDrCQBkJNEEDTRFO7ngGXgIeIPOGuJHrIRrvIVCJeCmtwIHsHtguIFpAuHAAGIxJoIbAqY1oTWnNCK+ALdBHgoYPLVsIrc+EYHgFQF+IMBJWkCyhDAQPdFQU9C9OINGGWNYAGGGGqnlB3qIIQruIYPcDjBMsbYJIQteXyHZt1kRYmZBNevECbk7NzaWLWjLTeHeDAtknxfQFwiEgACIqxUCIjR4p1YhEDqx67lDLYcCiRx0PGu4vj+AVCd6EJ15DEqwFYCyUgCiELMCl0BhcCMClCQIiSMAgC0BOBoi6GMBYKzToJyAix+k1BUXHgBis1vg1IAQABkDskByM+5uaNNKsSqWpkBz0e82G6oiqhsKqe9GqxOrsJW8k20i6qqCQ+9jZSCRwCoO+GVh9PQesAAwp-QAOqV1O0MRa78Zg2Skopf7JpTaeK3bUoqbmB0rEqNirAA3U201UiELJ3B3kbADh0Pms3S5RpICRBSbiZWpYparZTaaPLhpoNeGWypqjiYPpWTSYBh1M2R0gAvaOBX2thOa3hpCP2b34pXo3rxVO333oJ0ZXkBz8Z4OhzRnMDCMmrQ4PpJaMQvplIW37nW2Cwz3VzbnZy5yhwXxZ16BQh0CYjTD50BCF16ztkV0TImM53mN53DDWNR2bzMnYbiB8rqhyCOmhEBiT3VCdCvGeDnJfgkYMBEA4AH6DLyEUxwTa2F60xFxZ1QC7nAUIFGNDmPoDrYYcDbBhP60GQRSONmMWNWOF1oiN2MTN04Y0g1MW3QT1O6MQwTk5P5NQSYDpbSXeK+LPyvzrlwhblpMZP4XdJ6AiDgTaz7l4JQGeBwRlO52WOuM2PPgMRjQ1x+DXhka4avn+VwAbkmCFPhMCXUxBCHlOgrCELv1HCGiIAvLazvjubDDwAD7gNZNtMmD-n5P1AgBQi5Y9ysDEKT4Yg+M9ADwUk-MdADqEODkf6-N4BlBlIvI+CMDvggDbDAxwA4Cijcg72tM2I5OxLpP6a87QudBxBwzEDz5QCNhxLOrwOHqjn5YO3-ilBiAUZAHt5I4v0HOKOEIfl8XewMCSPwAB1fDjn6OPk3rKOUCqNEDwsm4ktyTaiW0bRpDaPZSEvwT82x4RHXTc21rpqsRPH2aIhyHQRC2Khm2YQ7UTax7a4dimP66G63aJmuSMCOkR57b-meskVeJ8He6F2MBBsCE+s7wW3i16SMBRssF6QRuLzms536vx6MDJuWsKHkCJunA6vbgTRwg-0l4Yj8HmC4ifVdNZ2TQlve7hr5t8hwg5DYN+3DBltoh2KfW7GrpYQY5o1rp1iWyY0agZyqB7RcpWhHRyBDuagQCuH2sSBY1FDbAwBQkIAQAcCeDAAFP9JPhMTvhYI6CEgiyIBdIixZC2y4gKowYWPovXpYvJqYCiifUzLuBwgYtgCoSGDgh3DtwrRMrLsagV4mijvmjjuHQ2hyAAeagSoztzvrswVeS+SfWVAQBUCKBogAe6ky7spjuWjgemCVz9uKjKAXzYAJIZDYBAssDYBDvYCQs2B7RI1MRKBAA">link</a>).</p></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
